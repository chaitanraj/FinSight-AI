const { PrismaClient } = require("@prisma/client");
const prisma = new PrismaClient();

const d = (date) => new Date(date);

async function main() {
  console.log("ðŸŒ± Seeding expenses with 70/30 distribution...");

  const expenses = [
    // ======================================================
    // USER 1 (â‰ˆ30% DATA â€” lighter activity)
    // ======================================================

    // Rent (9 months)
    ...[
      "2025-07-01","2025-08-01","2025-09-01",
      "2025-10-01","2025-11-01","2025-12-01",
      "2026-01-01","2026-02-01","2026-03-01",
    ].map(date => ({
      userId: 1,
      category: "Rent",
      merchant: "Landlord",
      amount: 10000,
      date: d(date),
    })),

    // Utilities (9 months)
    ...[
      ["2025-07-10",1500],["2025-08-10",1600],["2025-09-10",1550],
      ["2025-10-10",1650],["2025-11-10",1700],["2025-12-10",1750],
      ["2026-01-10",1680],["2026-02-10",1720],["2026-03-10",1700],
    ].map(([date, amount]) => ({
      userId: 1,
      category: "Utilities",
      merchant: "Utilities",
      amount,
      date: d(date),
    })),

    // Food (2 entries per month â†’ lighter usage)
    ...[
      ["2025-07-05",800],["2025-07-20",900],
      ["2025-08-06",850],["2025-08-22",950],
      ["2025-09-07",900],["2025-09-24",1000],
      ["2025-10-08",950],["2025-10-25",1050],
      ["2025-11-09",1000],["2025-11-26",1100],
      ["2025-12-10",1050],["2025-12-27",1150],
      ["2026-01-11",1000],["2026-01-28",1100],
      ["2026-02-12",1050],["2026-02-26",1150],
      ["2026-03-13",1100],["2026-03-27",1200],
    ].map(([date, amount]) => ({
      userId: 1,
      category: "Food",
      merchant: "Restaurant",
      amount,
      date: d(date),
    })),

    // Groceries (monthly)
    ...[
      ["2025-07-08",1800],["2025-08-08",1850],["2025-09-08",1900],
      ["2025-10-08",1950],["2025-11-08",2000],["2025-12-08",2100],
      ["2026-01-08",2050],["2026-02-08",2150],["2026-03-08",2200],
    ].map(([date, amount]) => ({
      userId: 1,
      category: "Groceries",
      merchant: "Supermarket",
      amount,
      date: d(date),
    })),

    // ======================================================
    // USER 2 (â‰ˆ70% DATA â€” heavy & frequent activity)
    // ======================================================

    // Rent (9 months)
    ...[
      "2025-07-01","2025-08-01","2025-09-01",
      "2025-10-01","2025-11-01","2025-12-01",
      "2026-01-01","2026-02-01","2026-03-01",
    ].map(date => ({
      userId: 2,
      category: "Rent",
      merchant: "Landlord",
      amount: 15000,
      date: d(date),
    })),

    // Utilities (9 months)
    ...[
      ["2025-07-10",2300],["2025-08-10",2400],["2025-09-10",2350],
      ["2025-10-10",2450],["2025-11-10",2550],["2025-12-10",2650],
      ["2026-01-10",2580],["2026-02-10",2680],["2026-03-10",2750],
    ].map(([date, amount]) => ({
      userId: 2,
      category: "Utilities",
      merchant: "Utilities",
      amount,
      date: d(date),
    })),

    // Food (4 entries per month â†’ heavy usage)
    ...[
      ["2025-07-03",1200],["2025-07-10",1400],["2025-07-18",1300],["2025-07-26",1500],
      ["2025-08-04",1250],["2025-08-11",1450],["2025-08-19",1350],["2025-08-28",1550],
      ["2025-09-05",1300],["2025-09-12",1500],["2025-09-20",1400],["2025-09-29",1600],
      ["2025-10-06",1350],["2025-10-13",1550],["2025-10-21",1450],["2025-10-30",1650],
      ["2025-11-07",1400],["2025-11-14",1600],["2025-11-22",1500],["2025-11-30",1700],
      ["2025-12-08",1500],["2025-12-15",1700],["2025-12-23",1600],["2025-12-31",1800],
      ["2026-01-09",1550],["2026-01-16",1750],["2026-01-24",1650],["2026-01-31",1850],
      ["2026-02-10",1600],["2026-02-17",1800],["2026-02-24",1700],["2026-02-28",1900],
      ["2026-03-11",1650],["2026-03-18",1850],["2026-03-25",1750],["2026-03-31",1950],
    ].map(([date, amount]) => ({
      userId: 2,
      category: "Food",
      merchant: "Cafe",
      amount,
      date: d(date),
    })),

    // Shopping (more frequent)
    ...[
      ["2025-08-15",4200],
      ["2025-09-18",3800],
      ["2025-10-20",4500],
      ["2025-11-22",4800],
      ["2025-12-24",5200],
      ["2026-02-14",5000],
    ].map(([date, amount]) => ({
      userId: 2,
      category: "Shopping",
      merchant: "Online Store",
      amount,
      date: d(date),
    })),

    // Travel (multiple)
    ...[
      ["2025-08-20",6000],
      ["2025-12-22",8500],
      ["2026-03-15",7200],
    ].map(([date, amount]) => ({
      userId: 2,
      category: "Travel",
      merchant: "Travel Agency",
      amount,
      date: d(date),
    })),
    ...[
      ["2025-08-20",600],
      ["2025-12-22",8500],
      ["2026-04-17",200],
      ["2026-04-21",100],
      ["2026-03-22",90],
    ].map(([date, amount]) => ({
      userId: 2,
      category: "Other",
      merchant: "Agency",
      amount,
      date: d(date),
    })),
    ...[
      ["2025-08-20",6000],
      ["2025-12-22",8500],
      ["2026-03-15",200],
      ["2026-08-15",200],
      ["2025-01-15",100],
      ["2025-11-15",150],
    ].map(([date, amount]) => ({
      userId: 2,
      category: "Transport",
      merchant: "Transport Agency",
      amount,
      date: d(date),
    })),
    ...[
      ["2025-08-20",60],
      ["2025-12-22",340],
      ["2026-02-11",70],
      ["2026-03-12",200],
      ["2026-02-15",80],
    ].map(([date, amount]) => ({
      userId: 2,
      category: "Entertainment",
      merchant: "Entertainment Agency",
      amount,
      date: d(date),
    })),
    ...[
      ["2025-08-20",1900],
      ["2025-12-22",500],
      ["2026-02-11",70],
      ["2026-01-13",200],
      ["2026-03-12",100],
    ].map(([date, amount]) => ({
      userId: 2,
      category: "Health",
      merchant: "Hospital Agency",
      amount,
      date: d(date),
    })),
        // ======================================================
    // USER 3 (â‰ˆ6 months â€” Prophet-optimized demo data)
    // ======================================================

    // Rent (fixed monthly)
    ...[
      "2025-10-01","2025-11-01","2025-12-01",
      "2026-01-01","2026-02-01","2026-03-01",
    ].map(date => ({
      userId: 3,
      category: "Rent",
      merchant: "Landlord",
      amount: 12000,
      date: d(date),
    })),

    // Utilities (monthly, slight variation)
    ...[
      ["2025-10-10",1800],
      ["2025-11-10",1850],
      ["2025-12-10",1900],
      ["2026-01-10",1950],
      ["2026-02-10",2000],
      ["2026-03-10",2050],
    ].map(([date, amount]) => ({
      userId: 3,
      category: "Utilities",
      merchant: "Utilities",
      amount,
      date: d(date),
    })),

    // Food (high-frequency â†’ PRIMARY Prophet signal)
    ...[
      ["2025-10-03",650],["2025-10-07",700],["2025-10-11",720],["2025-10-15",750],["2025-10-20",780],["2025-10-25",800],
      ["2025-11-02",700],["2025-11-06",740],["2025-11-10",770],["2025-11-15",800],["2025-11-20",820],["2025-11-26",850],
      ["2025-12-03",760],["2025-12-07",800],["2025-12-12",830],["2025-12-17",860],["2025-12-22",900],["2025-12-28",950],
      ["2026-01-04",800],["2026-01-08",840],["2026-01-13",880],["2026-01-18",920],["2026-01-23",960],["2026-01-29",1000],
      ["2026-02-03",850],["2026-02-07",900],["2026-02-12",940],["2026-02-17",980],["2026-02-22",1020],["2026-02-27",1050],
      ["2026-03-04",900],["2026-03-08",950],["2026-03-13",1000],["2026-03-18",1050],["2026-03-23",1100],["2026-03-28",1150],
    ].map(([date, amount]) => ({
      userId: 3,
      category: "Food",
      merchant: "Restaurant",
      amount,
      date: d(date),
    })),

    // Groceries (weekly â†’ SECOND Prophet signal)
    ...[
      ["2025-10-05",1800],["2025-10-12",1850],["2025-10-19",1900],["2025-10-26",1950],
      ["2025-11-02",1900],["2025-11-09",1950],["2025-11-16",2000],["2025-11-23",2050],
      ["2025-12-01",2000],["2025-12-08",2050],["2025-12-15",2100],["2025-12-22",2200],
      ["2026-01-05",2100],["2026-01-12",2150],["2026-01-19",2200],["2026-01-26",2250],
      ["2026-02-02",2200],["2026-02-09",2250],["2026-02-16",2300],["2026-02-23",2350],
      ["2026-03-02",2300],["2026-03-09",2350],["2026-03-16",2400],["2026-03-23",2450],
    ].map(([date, amount]) => ({
      userId: 3,
      category: "Groceries",
      merchant: "Supermarket",
      amount,
      date: d(date),
    })),

    // Transport (frequent, mild trend â†’ THIRD Prophet signal)
    ...[
      ["2025-10-02",220],["2025-10-06",240],["2025-10-10",260],["2025-10-14",280],
      ["2025-11-01",250],["2025-11-05",270],["2025-11-09",290],["2025-11-14",310],
      ["2025-12-03",280],["2025-12-08",300],["2025-12-13",320],["2025-12-18",340],
      ["2026-01-04",300],["2026-01-09",330],["2026-01-14",360],["2026-01-19",390],
      ["2026-02-03",350],["2026-02-08",380],["2026-02-13",410],["2026-02-18",440],
      ["2026-03-03",400],["2026-03-08",430],["2026-03-13",460],["2026-03-18",500],
    ].map(([date, amount]) => ({
      userId: 3,
      category: "Transport",
      merchant: "Transport",
      amount,
      date: d(date),
    })),

    // Shopping (light, realistic)
    ...[
      ["2025-11-15",3500],
      ["2025-12-20",4200],
      ["2026-02-14",3800],
    ].map(([date, amount]) => ({
      userId: 3,
      category: "Shopping",
      merchant: "Online Store",
      amount,
      date: d(date),
    })),

    // Entertainment (light)
    ...[
      ["2025-10-18",300],
      ["2025-12-26",600],
      ["2026-03-10",450],
    ].map(([date, amount]) => ({
      userId: 3,
      category: "Entertainment",
      merchant: "Entertainment",
      amount,
      date: d(date),
    })),    // ======================================================
    // USER 3 (BACKFILL â€” strengthen Prophet confidence)
    // Covers: Jul 2025 â†’ Sep 2025
    // ======================================================

    // Food (dense, stable â†’ PRIMARY signal)
    ...[
      ["2025-07-03",580],["2025-07-07",600],["2025-07-11",620],["2025-07-15",640],["2025-07-20",660],["2025-07-25",680],
      ["2025-08-02",600],["2025-08-06",630],["2025-08-10",660],["2025-08-15",690],["2025-08-20",720],["2025-08-26",750],
      ["2025-09-03",650],["2025-09-07",680],["2025-09-12",710],["2025-09-17",740],["2025-09-22",770],["2025-09-28",800],
    ].map(([date, amount]) => ({
      userId: 3,
      category: "Food",
      merchant: "Restaurant",
      amount,
      date: d(date),
    })),

    // Groceries (weekly â†’ SECONDARY signal)
    ...[
      ["2025-07-06",1700],["2025-07-13",1750],["2025-07-20",1800],["2025-07-27",1850],
      ["2025-08-03",1750],["2025-08-10",1800],["2025-08-17",1850],["2025-08-24",1900],
      ["2025-09-01",1800],["2025-09-08",1850],["2025-09-15",1900],["2025-09-22",1950],
    ].map(([date, amount]) => ({
      userId: 3,
      category: "Groceries",
      merchant: "Supermarket",
      amount,
      date: d(date),
    })),

    // Transport (frequent, low noise â†’ THIRD signal)
    ...[
      ["2025-07-02",200],["2025-07-06",220],["2025-07-10",240],["2025-07-14",260],
      ["2025-08-01",230],["2025-08-05",260],["2025-08-09",290],["2025-08-14",320],
      ["2025-09-03",270],["2025-09-07",300],["2025-09-12",330],["2025-09-17",360],
    ].map(([date, amount]) => ({
      userId: 3,
      category: "Transport",
      merchant: "Transport",
      amount,
      date: d(date),
    })),

    // Utilities (monthly â€” helps total-spend confidence)
    ...[
      ["2025-07-10",1700],
      ["2025-08-10",1750],
      ["2025-09-10",1780],
    ].map(([date, amount]) => ({
      userId: 3,
      category: "Utilities",
      merchant: "Utilities",
      amount,
      date: d(date),
    })),
        // ======================================================
    // USER 3 (FINAL BACKFILL â€” 12-month Prophet stabilization)
    // Covers: Apr 2025 â†’ Jun 2025
    // ======================================================

    // Food (dense, repeated seasonal structure)
    ...[
      ["2025-04-03",540],["2025-04-07",560],["2025-04-11",580],["2025-04-15",600],["2025-04-20",620],["2025-04-26",650],
      ["2025-05-03",560],["2025-05-07",590],["2025-05-11",620],["2025-05-16",650],["2025-05-21",680],["2025-05-27",710],
      ["2025-06-04",600],["2025-06-08",630],["2025-06-13",660],["2025-06-18",690],["2025-06-23",720],["2025-06-28",750],
    ].map(([date, amount]) => ({
      userId: 3,
      category: "Food",
      merchant: "Restaurant",
      amount,
      date: d(date),
    })),

    // Groceries (weekly, stable variance)
    ...[
      ["2025-04-06",1650],["2025-04-13",1700],["2025-04-20",1750],["2025-04-27",1800],
      ["2025-05-04",1700],["2025-05-11",1750],["2025-05-18",1800],["2025-05-25",1850],
      ["2025-06-01",1750],["2025-06-08",1800],["2025-06-15",1850],["2025-06-22",1900],
    ].map(([date, amount]) => ({
      userId: 3,
      category: "Groceries",
      merchant: "Supermarket",
      amount,
      date: d(date),
    })),

    // Transport (consistent repetition â†’ tight CI)
    ...[
      ["2025-04-02",190],["2025-04-06",210],["2025-04-10",230],["2025-04-14",250],
      ["2025-05-02",220],["2025-05-06",250],["2025-05-10",280],["2025-05-14",310],
      ["2025-06-03",260],["2025-06-07",290],["2025-06-12",320],["2025-06-17",350],
    ].map(([date, amount]) => ({
      userId: 3,
      category: "Transport",
      merchant: "Transport",
      amount,
      date: d(date),
    })),

    // Utilities (monthly anchor)
    ...[
      ["2025-04-10",1650],
      ["2025-05-10",1680],
      ["2025-06-10",1700],
    ].map(([date, amount]) => ({
      userId: 3,
      category: "Utilities",
      merchant: "Utilities",
      amount,
      date: d(date),
    })),

  ];

  await prisma.expense.createMany({ data: expenses });

  console.log("âœ… Seed completed (User2 â‰ˆ70%, User1 â‰ˆ30%)");
}

main()
  .catch(e => {
    console.error(e);
    process.exit(1);
  })
  .finally(async () => {
    await prisma.$disconnect();
  });
